---
id: defi
title: DeFi (탈중앙화 금융) 완전 가이드
sidebar_label: DeFi 가이드
description: DEX, 렌딩, 이자농사, 유동성 마이닝, TVL 분석, 프로토콜 밸류에이션까지 DeFi 생태계 완전 정복
keywords: [DeFi, 탈중앙화금융, DEX, Uniswap, Aave, Compound, 이자농사, 유동성마이닝, TVL, 플래시론, 비영구적손실]
---

# DeFi (탈중앙화 금융) 완전 가이드

탈중앙화 금융(Decentralized Finance, DeFi)은 블록체인과 스마트 컨트랙트를 기반으로 중개자 없이 금융 서비스를 제공하는 생태계입니다. 은행, 증권사, 보험사 같은 전통적인 금융 중개기관의 역할을 코드가 대체하며, 누구나 인터넷 접속만으로 금융 서비스에 접근할 수 있습니다. 2020년 "DeFi 여름" 이후 급성장하여 TVL(Total Value Locked)이 최대 1,800억 달러를 돌파했으며, 전통 금융의 대안이자 보완재로서의 역할을 넓혀가고 있습니다.

---

## DEX (탈중앙화 거래소)

### AMM (Automated Market Maker) 메커니즘

전통적인 거래소는 주문서(Order Book) 방식으로 매수자와 매도자를 매칭합니다. 반면 AMM 기반 DEX는 유동성 풀(Liquidity Pool)과 수학적 공식을 사용하여 자동으로 가격을 결정합니다.

**Constant Product Market Maker (CPMM)**

Uniswap V2가 사용하는 가장 기본적인 AMM 공식입니다.

```
x * y = k

x: 토큰 A의 수량
y: 토큰 B의 수량
k: 상수 (유동성 풀의 크기)
```

예를 들어 ETH/USDC 풀에 10 ETH와 20,000 USDC가 있다면 k = 200,000입니다. 1 ETH를 매수하면 풀에서 ETH가 줄어들고 USDC가 추가되어, 가격이 자동으로 조정됩니다.

**Concentrated Liquidity (집중 유동성)**

Uniswap V3는 유동성 공급자(LP)가 특정 가격 범위에만 유동성을 제공할 수 있게 하여 자본 효율성을 획기적으로 개선했습니다. 전통적인 AMM 대비 최대 4,000배의 자본 효율성 향상이 가능합니다.

### 주요 DEX 프로토콜 비교

| 프로토콜 | 체인 | AMM 모델 | 특징 | 일평균 거래량 |
|---------|------|---------|------|-------------|
| Uniswap V3 | Ethereum, L2 | 집중 유동성 | 최대 DEX, 다중 체인 | $1B+ |
| Curve | Ethereum, L2 | StableSwap | 스테이블코인 특화 | $200M+ |
| PancakeSwap | BSC, Ethereum | CPMM | 바이낸스 생태계 | $300M+ |
| Raydium | Solana | 하이브리드 AMM | CLB + 주문서 | $500M+ |
| dYdX | Cosmos(자체체인) | 주문서 | 파생상품 특화 | $1B+ |

:::tip DEX 거래 시 유의사항
DEX에서 거래할 때는 반드시 **슬리피지(Slippage)** 설정을 확인하세요. 슬리피지란 예상 가격과 실제 체결 가격의 차이입니다. 유동성이 낮은 풀에서 대규모 거래 시 슬리피지가 크게 발생할 수 있으며, 일반적으로 0.5~1% 이내로 설정하는 것이 안전합니다. MEV(Maximal Extractable Value) 봇의 샌드위치 공격을 방지하기 위해 Flashbots RPC나 MEV 보호 기능이 있는 프론트엔드를 사용하는 것을 권장합니다.
:::

---

## 렌딩 프로토콜 (Lending & Borrowing)

### 작동 원리

DeFi 렌딩 프로토콜은 과잉담보(Over-collateralized) 대출 모델을 사용합니다. 사용자는 담보 자산을 예치하고 그 가치의 일정 비율(LTV, Loan-to-Value)만큼 다른 자산을 빌릴 수 있습니다.

**핵심 매개변수**:

- **LTV (Loan-to-Value)** — 담보 가치 대비 대출 가능 비율 (예: ETH 담보 시 LTV 80% → $10,000 ETH 예치 시 $8,000 대출 가능)
- **청산 임계값 (Liquidation Threshold)** — 이 비율을 초과하면 담보가 청산됨 (예: 85%)
- **청산 패널티 (Liquidation Penalty)** — 청산 시 추가 부과되는 비용 (보통 5~15%)
- **건강도 (Health Factor)** — (담보가치 × 청산임계값) / 대출가치, 1 미만 시 청산 대상

### 주요 렌딩 프로토콜

**Aave**

이더리움 최대 렌딩 프로토콜로, 플래시론(Flash Loan), 변동/고정 금리 선택, 다양한 담보 자산을 지원합니다. Aave V3에서는 E-Mode(Efficiency Mode)를 통해 상관관계 높은 자산 간 최대 97%까지 LTV를 제공합니다. GHO 스테이블코인도 발행합니다.

**Compound**

cToken 모델을 사용하는 선구적 렌딩 프로토콜입니다. Compound V3(Comet)에서는 단일 대출 자산 모델로 전환하여 리스크 관리를 강화했습니다.

**MakerDAO (Sky)**

DAI 스테이블코인을 발행하는 프로토콜로, CDP(Collateralized Debt Position)를 통해 ETH 등의 담보를 예치하고 DAI를 발행합니다. RWA(Real World Assets)를 담보로도 수용하며, 현재 Sky로 리브랜딩하여 USDS를 발행하고 있습니다.

:::caution 청산 리스크
DeFi 렌딩에서 가장 큰 리스크는 담보 가격 급락으로 인한 **청산(Liquidation)**입니다. 2022년 5월 LUNA 폭락 당시 수십억 달러 규모의 청산이 연쇄적으로 발생했습니다. Health Factor를 항상 1.5 이상으로 유지하고, 극단적 변동성에 대비한 안전마진을 확보하세요.
:::

---

## 이자 농사 (Yield Farming) & 유동성 마이닝

### 수익 원천의 분류

DeFi에서 수익(Yield)은 다양한 원천에서 발생합니다. 이를 정확히 이해하는 것이 건전한 투자 판단의 기초입니다.

1. **거래 수수료** — DEX 유동성 공급의 대가로 받는 거래 수수료 (실질 수익)
2. **대출 이자** — 렌딩 프로토콜에서 자산을 대여해주는 대가 (실질 수익)
3. **프로토콜 토큰 보상** — 유동성 마이닝으로 받는 거버넌스 토큰 (인플레이션 보상)
4. **스테이킹 보상** — PoS 검증에 대한 보상 (네트워크 인플레이션)
5. **프로토콜 수익 분배** — 프로토콜이 벌어들인 수수료의 재분배 (실질 수익)

:::danger 높은 APY의 함정
APY 1,000%, 10,000%를 내세우는 프로토콜을 발견하면 반드시 **수익의 원천**을 확인하세요. 대부분 프로토콜 토큰을 대량 발행하여 보상으로 지급하는 것이며, 토큰 가격 하락으로 실질 수익은 마이너스가 될 수 있습니다. 지속 가능한 수익인지(거래 수수료, 대출 이자) 아니면 인플레이션 보상인지를 반드시 구분해야 합니다.
:::

### APY vs APR 계산

**APR (Annual Percentage Rate)** — 단리 기준 연간 수익률

```
APR = (기간 수익률) × (연간 기간 수)

예: 일일 수익률 0.1% → APR = 0.1% × 365 = 36.5%
```

**APY (Annual Percentage Yield)** — 복리 기준 연간 수익률

```
APY = (1 + r/n)^n - 1

r: 연간 이자율 (APR)
n: 복리 횟수 (일 복리 시 365)

예: APR 36.5%, 일 복리 → APY = (1 + 0.365/365)^365 - 1 ≈ 44.1%
```

실제 DeFi에서 표시되는 APY는 현재 시점의 수익률을 연환산한 것이므로, 시장 상황에 따라 크게 변동합니다. 과거의 APY가 미래에도 유지될 것이라고 가정해서는 안 됩니다.

---

## 비영구적 손실 (Impermanent Loss)

### 개념과 수학적 모델

비영구적 손실(IL)은 AMM 유동성 풀에 자산을 예치했을 때, 단순히 보유(HODL)했을 때와 비교하여 발생하는 가치 차이입니다.

**비영구적 손실 공식 (CPMM 기준)**:

```
IL = 2 × √(가격비율) / (1 + 가격비율) - 1

가격비율 = 현재가격 / 예치시점가격
```

**가격 변동에 따른 비영구적 손실**:

| 가격 변동 | 비영구적 손실 |
|----------|-------------|
| ±25% | -0.6% |
| ±50% | -2.0% |
| ±100% (2배) | -5.7% |
| ±200% (3배) | -13.4% |
| ±400% (5배) | -25.5% |

비영구적 손실이 "비영구적"인 이유는 가격이 원래 비율로 돌아오면 손실이 사라지기 때문입니다. 그러나 실제로는 가격이 돌아오지 않는 경우가 많으므로, 거래 수수료 수익이 비영구적 손실을 상쇄할 수 있는지를 항상 확인해야 합니다.

### 비영구적 손실 완화 전략

1. **상관관계 높은 자산 쌍 선택** — ETH/stETH, USDC/USDT 같은 유사 자산 쌍은 IL이 최소화됨
2. **집중 유동성 범위 관리** — Uniswap V3에서 적절한 가격 범위를 설정하면 수수료 수익이 IL을 상쇄할 가능성이 높아짐
3. **높은 거래량 풀 선택** — 거래 수수료가 많이 발생하는 풀은 IL을 보상할 수 있음
4. **단일 자산 스테이킹 활용** — IL 리스크를 완전히 제거하려면 단일 자산 스테이킹이나 렌딩을 고려

---

## TVL 분석과 프로토콜 밸류에이션

### TVL (Total Value Locked)

TVL은 DeFi 프로토콜에 예치된 총 자산 가치로, 프로토콜의 규모와 신뢰도를 나타내는 핵심 지표입니다.

**TVL 분석 시 주의점**:

- **이중 계산(Double Counting)** — A 프로토콜에서 빌린 자산을 B 프로토콜에 예치하면 TVL이 이중 계산됨
- **인센티브 의존도** — 토큰 보상이 중단되면 TVL이 급격히 빠져나갈 수 있음 (용병 자본)
- **가격 효과** — 기초 자산 가격 상승으로 TVL이 증가한 것인지, 실제 새로운 자금 유입인지 구분 필요
- **체인별 차이** — 이더리움 기반 TVL이 전체의 50% 이상이며, L2의 비중이 빠르게 증가 중

### DeFi 프로토콜 밸류에이션 지표

**P/TVL (Price to TVL Ratio)**

```
P/TVL = 완전희석시가총액(FDV) / TVL
```

- 프로토콜이 유치한 자금 대비 토큰 가치를 평가
- P/TVL이 낮을수록 상대적으로 저평가
- 일반적으로 P/TVL < 1이면 저평가로 간주, 5 이상이면 고평가 가능성

**P/S (Price to Sales Ratio)**

```
P/S = 완전희석시가총액(FDV) / 연간화 수수료 수익

또는

P/S = 완전희석시가총액(FDV) / 연간화 프로토콜 수익
```

- 수수료 수익(Fees) — 사용자가 프로토콜에 지불하는 총 수수료
- 프로토콜 수익(Revenue) — 수수료 중 프로토콜 금고(Treasury)나 토큰 홀더에게 돌아가는 부분
- 전통 금융의 P/S 비율과 유사하게 해석 가능

**토큰 속도 (Token Velocity)**

```
Token Velocity = 총 거래량 / 시가총액
```

- 토큰이 얼마나 빠르게 순환하는지를 나타냄
- 속도가 너무 높으면 사용자가 토큰을 보유하지 않고 즉시 매도한다는 의미
- 스테이킹, 거버넌스 참여 등으로 속도를 낮추는 메커니즘이 가치에 긍정적

---

## 플래시론 (Flash Loan)

### 작동 원리

플래시론은 담보 없이 대규모 자금을 빌린 뒤, 동일 트랜잭션 내에서 상환하는 DeFi 고유의 대출 메커니즘입니다. 하나의 블록(트랜잭션) 안에서 대출-활용-상환이 모두 이루어져야 하며, 상환이 이루어지지 않으면 전체 트랜잭션이 자동으로 취소됩니다.

**주요 활용 사례**:

1. **차익거래(Arbitrage)** — 거래소 간 가격 차이를 이용한 무위험 수익
2. **자기 청산(Self-Liquidation)** — 청산 패널티 없이 자신의 포지션 정리
3. **담보 교체(Collateral Swap)** — 대출 포지션의 담보를 다른 자산으로 교체
4. **청산 참여** — 다른 사용자의 청산 가능한 포지션을 청산하여 보상 획득

:::danger 플래시론 공격
플래시론은 합법적인 활용 외에 해킹에도 악용됩니다. 오라클 조작, 거버넌스 공격, 가격 조작 등에 플래시론이 사용된 사례가 다수 있습니다. 2020~2023년 동안 플래시론을 이용한 해킹으로 수억 달러의 피해가 발생했습니다. 프로토콜 개발자는 반드시 시간 가중 오라클, 재진입 방지 등의 보안 장치를 구현해야 합니다.
:::

---

## 결합성과 리스크 (Composability & Risks)

### DeFi의 결합성 (Money Legos)

DeFi 프로토콜은 서로 결합하여 새로운 금융 상품을 만들 수 있습니다. 이를 "머니 레고"라고 부릅니다.

**결합성 예시**:

1. ETH를 Lido에 스테이킹하여 stETH를 받음
2. stETH를 Aave에 담보로 예치
3. Aave에서 USDC를 빌림
4. USDC를 Curve 풀에 유동성 공급
5. Curve LP 토큰을 Convex에 스테이킹하여 추가 수익 획득

이 과정에서 하나의 ETH로 스테이킹 수익 + 대출 레버리지 + 유동성 공급 수수료 + 추가 토큰 보상을 동시에 받을 수 있습니다.

### 시스템 리스크

그러나 이러한 결합성은 시스템 리스크를 증폭시킵니다.

**스마트 컨트랙트 리스크** — 하나의 프로토콜에 취약점이 발견되면 연결된 모든 프로토콜에 영향을 미칩니다. 2022년 Wormhole 브릿지 해킹($320M), Ronin 브릿지 해킹($625M) 등이 대표적입니다.

**오라클 리스크** — DeFi 프로토콜은 외부 가격 데이터를 위해 오라클(Chainlink 등)에 의존합니다. 오라클이 잘못된 가격을 제공하면 대규모 손실이 발생할 수 있습니다.

**거버넌스 리스크** — 토큰 보유자의 투표로 프로토콜 매개변수가 변경될 수 있으며, 악의적 제안이 통과될 가능성이 있습니다.

**디페깅 리스크** — 스테이블코인이나 파생 자산이 기초 자산과의 1:1 가치를 잃는 경우입니다. UST/LUNA 붕괴(2022)가 가장 극적인 사례입니다.

### 스마트 컨트랙트 감사 (Audit)

프로토콜 안전성을 평가할 때 스마트 컨트랙트 감사 여부는 필수 체크 항목입니다.

**주요 감사 기관**: Trail of Bits, OpenZeppelin, Consensys Diligence, Certik, Halborn, Spearbit

**감사 시 확인 사항**:

- 감사 기관의 평판과 실적
- 발견된 취약점의 심각도와 해결 여부
- 감사 범위 (전체 코드 vs 일부 기능만)
- 감사 이후 코드 변경 여부
- 버그 바운티 프로그램 운영 여부
- 형식 검증(Formal Verification) 실시 여부

:::caution 감사는 절대적 보장이 아닙니다
감사를 받았다고 해서 100% 안전하다는 의미는 아닙니다. 여러 차례 감사를 받은 프로토콜도 해킹당한 사례가 있습니다. 감사는 리스크를 줄이는 하나의 장치일 뿐이며, 분산 투자와 리스크 관리가 여전히 중요합니다.
:::

---

## 한국 DeFi 규제 환경

### 현행 규제 체계

한국에서 DeFi는 아직 명확한 규제 프레임워크가 확립되지 않은 영역입니다. 그러나 다음과 같은 규제 동향이 주목할 만합니다.

**가상자산이용자보호법 (2024년 7월 시행)**:

- 가상자산 사업자의 의무 강화 (이용자 예치금 분리보관, 보험 가입 등)
- 불공정거래 금지 (시세조종, 미공개정보 이용 등)
- DeFi 프로토콜에 대한 직접 규제는 아직 미적용이나, 향후 확대 가능성

**DeFi 관련 과세**:

- 2025년 이후 가상자산 양도소득에 대한 과세가 논의되고 있으나, 시행 시기가 수차례 연기됨
- DeFi 수익(이자, 유동성 공급 수수료 등)의 과세 분류가 불명확
- 해외 DeFi 프로토콜 사용 시 해외 금융계좌 신고 의무 여부도 논란

**향후 전망**:

- EU MiCA 규제 등 글로벌 규제 흐름에 맞춰 한국도 DeFi 규제안 마련 예상
- VASP(가상자산사업자) 등록 요건이 DeFi 프론트엔드에까지 확대될 가능성
- 탈중앙화 수준에 따른 차등 규제 접근이 논의 중

---

## DeFi 투자 체크리스트

DeFi 프로토콜에 투자하거나 자금을 예치하기 전에 다음 항목을 반드시 검토하세요.

1. **팀과 배경** — 익명 팀인지 실명 팀인지, 과거 프로젝트 이력
2. **스마트 컨트랙트 감사** — 신뢰할 수 있는 기관의 감사 이력
3. **TVL 추세** — 인센티브 없이도 TVL이 유지되는지
4. **수익의 지속 가능성** — 높은 APY의 원천이 무엇인지
5. **토큰 경제학** — 토큰 발행 일정, 팀 물량 비중, 락업 기간
6. **거버넌스 구조** — 의사결정 과정의 투명성과 참여도
7. **보안 이력** — 과거 해킹이나 익스플로잇 이력
8. **유동성** — 토큰의 DEX/CEX 유동성이 충분한지
9. **의존성** — 오라클, 브릿지 등 외부 의존도
10. **규제 리스크** — 해당 서비스가 규제 대상이 될 가능성

---

## 참고 문헌

- Schar, Fabian, "Decentralized Finance: On Blockchain- and Smart Contract-Based Financial Markets", *Federal Reserve Bank of St. Louis Review*, 2021
- Harvey, Campbell et al., *DeFi and the Future of Finance*, Wiley, 2021

## 관련 페이지

- [크립토 개요](/assets/crypto/intro) — 디지털자산 분석 프레임워크
- [이더리움](/assets/crypto/ethereum) — DeFi의 핵심 플랫폼
- [레이어2 & 확장성](/assets/crypto/layer2-scaling) — DeFi를 지탱하는 확장성 솔루션
- [스테이킹 & 수익 전략](/assets/crypto/staking-yield) — DeFi 수익 전략 심화
- [암호화폐 보안](/assets/crypto/crypto-security) — DeFi 보안 리스크 관리
- [암호화폐 규제](/assets/crypto/crypto-regulation) — DeFi 규제 동향 상세
